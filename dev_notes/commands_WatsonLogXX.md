## Идея

Команда `watson log -d` выводит лог следующего вида
```
	73dbe2a  09:15 to 11:19   2h 04m 12s  Gitea  [Work]
	2075079  09:50 to 10:10      19m 40s         Routines  [Common]
	a40bbde  12:38 to 12:45          33s       Notetaking  [Reports]
```

Задача: приводить все подобные текстовые блоки к более подходящему для ежедневных отчётов виду.

Предполагаемое использование:
`: WatsonLog` -- во всём файле все строки.
`: WatsonLog 5` -- отдельную строку с номером 5.
`: WatsonLog 2 4 6` -- отдельную строку с номерами 2, 4, 6.
`: WatsonLog 2 4,6` -- отдельную строку с номером 2 и строки с 4-ой по 6-ю включительно.


### WatsonLogShort

Написать команду для vim `WatsonLogShort`, которая будет приводить вставленные в заметку логи к виду:
```
* 09:15-11:19 (2h 04m 12s) [Work]
* 09:50-10:10 (19m 40s) [Common]
* 12:38-12:45 (33s) [Reports]
```


### WatsonLogRemarks

Написать команду для vim `WatsonLogRemarks`, которая будет приводить вставленные в заметку логи к заготовке вида:
```
* 09:15-11:19 (2h 04m 12s) [Work]

  Сделано:
  - ...
  
* 12:31-14:12 (1h 41m 14s) [Work, DevTools]

  Сделано:
  - ...
  
```

В силу реализации, команды типа `WatsonLogRemarks 2 4 6,9` отработают частично или вообще некорректно, т.к. к моменту вызова 2-го и последующих элементов строки в текущем буфере сдвинутся.

Таким образом, данную команду нужно применять к одному интервалу строк за раз:
+ `: WatsonLogRemarks` -- во всём файле все строки.
+ `: WatsonLogRemarks 5` -- отдельную строку с номером 5.
+ `: WatsonLogRemarks 2,9` -- строки с 2-ой по 9-ю включительно.


### WatsonLogCommits

Написать команду для vim `WatsonLogCommits`, которая будет приводить вставленные в заметку логи к заготовке вида:
```
* 09:15-11:19 (2h 04m 12s) [Work]

  Сделано:
  - ...
  -------------------------------   << Длина подгоняется под каждый заголовок лога

  Коммиты ...

* 12:31-14:12 (1h 41m 14s) [Work, DevTools]

  Сделано:
  - ...
  -----------------------------------------

  Коммиты ...

* 18:26-20:18 (1h 52m 17s) [Work, DevTools, EduTH]

  Сделано:
  - ...
  ------------------------------------------------

  Коммиты ...

```

На использование данной команды накладываются аналогичные ограничения, как и в случае с `WatsonLogRemarks`.


## Использованные материалы

Выражение `:s#...` и regex:
1. sub-expressions -- см. доки vim, команда `:help E51`.
2. описание строки-замены паттерна с помощью вложенных выражение (динамическое генерирование (?) строки-замены) -- см. доки vim, команда `:help sub-replace-expression`.
    - функция `submatch()` -- см. доки vim, команда `:help submatch`.
3. Стандартные функции vim -- см. доки vim, команда `:help builtin-functions`:.
    - функция `repeat("x", <num_repeats>)` -- см. доки vim, `:help repeat`.

Объявление функций и команд, принимающих аргументы:
- code style: названия пользовательских команд и функций начинаются строго (!) с заглавной буквы -- доки vim, команда `:help user-commands`
- раздел "Varargs" (очень пригодилось при написании функций) [^learn-vim-hard-way-varargs]
- раздел "Commands with arguments" [^vimsript-cheatsheet]




[^vimsript-cheatsheet]: https://devhints.io/vimscript
[^learn-vim-hard-way-varargs]: https://learnvimscriptthehardway.stevelosh.com/chapters/24.html
